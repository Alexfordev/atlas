# Atlas Chain

Atlas chain is a truly fast, permissionless, secure and scalable public blockchain platform.

Building atlas requires both a Go (version 1.14 or later) and a C compiler.
You can install them using your favourite package manager.
Once the dependencies are installed, run

```
    git clone https://github.com/mapprotocol/atlas.git
    cd atlas
    make atlas
```

## Running atlas

Going `atlas -h` can get help infos.

### Running on the atlas main network

```
$ atlas console
```

## Cross Chain Interface

### Ethereum 

a cross tx on the ethereum mainnet, the relayer which watch the ethereum will capture the tx and send the key infomation 
to the map atlas.

key info details:

```
type CrossTXProve struct {
	Tx      *BaseParams
	Receipt *types.Receipt
	Prove   light.NodeList
	TxIndex uint
}


type BaseParams struct {
	From     []byte
	To       []byte
	Value    *big.Int
}


```
BaseParams details: cross tx matedata.

| parameter   | type      | comment |
| ----------- | ----------| ------- |
| Tx.From     | []byte    | the sender of the transaction,use ethereum`s common package |
| Tx.To       | []byte    | the receiver of the transaction,use ethereum`s common package |
| Tx.Value    | *big.Int  | transaction value |



'CrossTXProve'.'Receipt' is a receipt of the tx from '"github.com/ethereum/go-ethereum/core/types"'.

```
// Receipt represents the results of a transaction.
type Receipt struct {
	// Consensus fields: These fields are defined by the Yellow Paper
	Type              uint8  `json:"type,omitempty"`
	PostState         []byte `json:"root"`
	Status            uint64 `json:"status"`
	CumulativeGasUsed uint64 `json:"cumulativeGasUsed" gencodec:"required"`
	Bloom             Bloom  `json:"logsBloom"         gencodec:"required"`
	Logs              []*Log `json:"logs"              gencodec:"required"`

	// Implementation fields: These fields are added by geth when processing a transaction.
	// They are stored in the chain database.
	TxHash          common.Hash    `json:"transactionHash" gencodec:"required"`
	ContractAddress common.Address `json:"contractAddress"`
	GasUsed         uint64         `json:"gasUsed" gencodec:"required"`

	// Inclusion information: These fields provide information about the inclusion of the
	// transaction corresponding to this receipt.
	BlockHash        common.Hash `json:"blockHash,omitempty"`
	BlockNumber      *big.Int    `json:"blockNumber,omitempty"`
	TransactionIndex uint        `json:"transactionIndex"`
}
```

'CrossTXProve'.'Prove' is a prove generated by the MPT tree composed of receipts of all transactions in the block.
the type of 'Prove' used in '"github.com/ethereum/go-ethereum/light"'

```
// NodeSet stores a set of trie nodes. It implements trie.Database and can also
// act as a cache for another trie.Database.
type NodeSet struct {
	nodes map[string][]byte
	order []string

	dataSize int
	lock     sync.RWMutex
}

// NewNodeSet creates an empty node set
func NewNodeSet() *NodeSet {
	return &NodeSet{
		nodes: make(map[string][]byte),
	}
}

```

'CrossTXProve'.'Receipt' the index of the current transaction in the block transaction list.

#### Example

```go
package main

import (
	"math/big"
	"strings"

	"github.com/ethereum/go-ethereum/accounts/abi"
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/core/types"
	"github.com/ethereum/go-ethereum/light"
	"github.com/ethereum/go-ethereum/rlp"
)

type TxParams struct {
	From  common.Address
	To    common.Address
	Value *big.Int
}

type TxProve struct {
	Tx      *TxParams
	Receipt *types.Receipt
	Prove   light.NodeList
	TxIndex uint
}

func example() {
	var (
		srcChain = big.NewInt(1)
		dstChain = big.NewInt(211)
	)

	txProve, err := rlp.EncodeToBytes(TxProve{})
	if err != nil {
		panic(err)
	}

	ABITxVerify, _ := abi.JSON(strings.NewReader(""))
	input, err := ABITxVerify.Pack("txVerify", srcChain, dstChain, txProve)
	if err != nil {
		panic(err)
	}
	// Send Transaction
	
	return
}
```